
let QuestionMap = {

    //greetings
    "hello" : "hello, how are you?",
    "hellow" : "hellow, how are you?",
    "how are you" : "Thanku for asking, I am fine what about you :)",
    "how are you?" : "Thanku for asking, I am fine what about you :)",
    "how r you" : "Thanku for asking, I am fine what about you :)",
    "how r you?" : "Thanku for asking, I am fine what about you :)",
    "hi" : "Hi, How are you.",
    "fine" : "Nice to hear, Now how can I help you?",
    "I am fine" : "Nice to hear, Now how can I help you?",

    //about
    "what is your name" : "Sorry, It's an autogenerated answer.",
    "what is your name?" : "Sorry, It's an autogenerated answer.",
    "are you a robot?" : "Yes I am a robot, but I‚Äôm a good one. Let me prove it. How can I help you?",
    "r you a robot?" : "Yes I am a robot, but I'm  a good one. Let me prove it. How can I help you.",
    "are you a robot" : "Yes I am a robot, but I‚Äôm a good one. Let me prove it. How can I help you?",
    "r you a robot" : "Yes I am a robot, but I‚Äôm a good one. Let me prove it. How can I help you.",
    "r u a robot?" : "Yes I am a robot, but I‚Äôm a good one. Let me prove it. How can I help you.",
    "r u a robot" : "Yes I am a robot, but I‚Äôm a good one. Let me prove it. How can I help you.",

    //Fee Related
    "fee" : "For fee related inquiries you have to visit our campus or Contact on 8587820850, Thanks.",
    "fee structure" : "For fee related inquiries you have to visit our campus or Contact on 8587820850, Thanks.",
    "fees" : "For fee related inquiries you have to visit our campus or Contact on 8587820850, Thanks.",
    "fees kya hai" : "For fee related inquiries you have to visit our campus or Contact on 8587820850, Thanks.",
    "fee kya hai" : "For fee related inquiries you have to visit our campus or Contact on 8587820850, Thanks.",
    "fees kya hai?" : "For fee related inquiries you have to visit our campus or Contact on 8587820850, Thanks.",
    "fee kya hai?" : "For fee related inquiries you have to visit our campus or Contact on 8587820850, Thanks.",

    //Question
}


let redirectQuestions = {

    "what is the admission process?" : "redirect to admission enquiry",
    "admission" : "redirect to admission enquiry",
    "admission process" :"redirect to admission enquiry"

}








    







//script


var sent = new Audio('sent.wav');
var received = new Audio('received.mp3');
sent.load();
received.load();



let chatbot = document.querySelector(".chatbox");
let textbox = document.querySelector(".texts");
let usr_msg = document.querySelector(".chatbox input");

function openChatBot(){
    chatbot.style.display = "block";
    document.querySelector(".chatbot-handler img").style.display = "none";
    document.querySelector(".chatbot-handler i").style.display = "block";
    greet();
    received.play();
}

function closeChatBot(){
    chatbot.style.display = "none"
    document.querySelector(".chatbot-handler img").style.display = "block";
    document.querySelector(".chatbot-handler i").style.display = "none";
    clearChatBox();
}



function greet(){
    const hour = new Date().getHours();
    const welcomeTypes = ["Good morning", "Good afternoon", "Good evening"];
    let welcomeText = "";
    
    if (hour < 12) welcomeText = welcomeTypes[0];
    else if (hour < 18) welcomeText = welcomeTypes[1];
    else welcomeText = welcomeTypes[2];


    setBotText(welcomeText + " Sir/Ma'am?, How may I assist you");
    setBotText("<a class='btn' href='./pages/contact-us.php'>Contact Us <i class='fa-solid fa-angles-right'></i></a><a class='btn' href='./pages/contact-us.php'>Location<i class='fa-solid fa-angles-right'></i></a><a class='btn' href='./register.php'>Admission Enquiry<i class='fa-solid fa-angles-right'></i></a>");
}
// openChatBot();


function clearInput(){
    document.querySelector(".chatbox input").value = "";
}

function clearChatBox(){
    textbox.innerHTML = "";
}


function setBotText(txt){

    let div = document.createElement("div");
    div.classList.add("chatbot_txt")
    let html = `<div class="msg"><img width="40px" src="./assets/images/typing-texting.gif"></div>`;
    div.innerHTML = html;
    textbox.appendChild(div);

    // new Promise
   
    // setTimeout(() => {
    //     div = document.createElement("div");
    //     div.classList.add("chatbot_txt")
    //     html = `<div class="msg"><p>`+txt+`<p></div>`;
    //     div.innerHTML = html;
    //     textbox.appendChild(div);
    // }, 1000);

    // let conditions=true;

    function waitForOneSecond(_callback){
        setTimeout(() => {
            _callback();
        }, 1000);
    }

    waitForOneSecond(function(){
        div.innerHTML = "";
        html = `<div class="msg"><p>`+txt+`<p></div>`;
        div.innerHTML = html;
        textbox.appendChild(div);
        scrollDown();
        received.play();
    })

    // let proms = new Promise((resolve, reject) => {
    //     setTimeout(() => {
         
    //         resolve("hello");
    //     }, 1000);
    // });

    // proms.then();


    
}

function setUsrText(txt){
    let div = document.createElement("div");
    div.classList.add("usr_txt")
    let html = `<div class="msg"><p>`+txt+`</p></div>`;
    div.innerHTML = html;
    textbox.appendChild(div);
    sent.play();
}


function chatbot_algorithm(msg){
    msg = msg.toLowerCase();

    if(redirectQuestions[msg]){
        // if(redirectQuestions[msg] == "redirect to admission enquiry"){
        //     chatbotRedirect("./pages/")
        // }


    }else if(QuestionMap[msg]){
        setBotText(QuestionMap[msg])
    }else{
        setBotText("üòµ‚Äçüí´ Oops!Sorry, I didn't understand what are you trying say. Click the button if you want any one of given information");
        setBotText("<a class='btn' href='./pages/contact-us.php'>Contact Us <i class='fa-solid fa-angles-right'></i></a><a class='btn' href='./pages/contact-us.php'>Location<i class='fa-solid fa-angles-right'></i></a><a class='btn' href='./register.php'>Admission Enquiry<i class='fa-solid fa-angles-right'></i></a>");
    }
}

function takeUsrInput(){
    let msg = usr_msg.value;
    if(!msg){
        return;
    }else{
        setUsrText(msg)
        chatbot_algorithm(msg);
    }
    clearInput();       
    scrollDown();
}

function playDrop(){

}

function scrollDown(){
    textbox.scrollTo(30000,4000000)
}

document.querySelector(".chatbox input").addEventListener("keydown", (e) =>{
    if(e.code == 'Enter'){
        takeUsrInput();
    }
})


































